import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.*;
import javax.swing.*;

public class GUI extends JFrame {

  private String accountType, reportMessage = "";
	private JPanel panel, panel1;
	private JRadioButton checkingRadioButton, savingsRadioButton;
	private JButton saveAccount, deposit, withdrawal, monthlyProcess, report, exit;
	private JLabel accType, accountNumber, initialBalance, annualRate;
	private JTextField accNumField, initBalField, annRateField;
	double annRate, withdrawAmount, depositAmount;
	int accountSearch;
	Scanner scan;
	
	public GUI()
	{
	
	  	setTitle("BankAccount");
		setSize(270, 250);
		buildPanel();
	    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		setVisible(true);
	}
	
	 
	private void  buildPanel()
	{
		
		panel = new JPanel();
		panel1 = new JPanel();
		accType = new JLabel("Account Type");
		accountNumber = new JLabel("Account Number");
		initialBalance = new JLabel("Initial Balance");
		annualRate = new JLabel("Annual Rate");
		accNumField = new JTextField(10);
		initBalField = new JTextField(10);
		annRateField = new JTextField(10);
	 	savingsRadioButton = new JRadioButton("Savings");
	 	checkingRadioButton = new JRadioButton("Checking");
		saveAccount = new JButton("Save Account");
		deposit = new JButton("Deposit");
		withdrawal = new JButton("Withdrawal");
		monthlyProcess = new JButton("Monthly Process");
		report = new JButton("Generate Report");
		exit = new JButton("Exit");
		
		savingsRadioButton.addActionListener( new RadioButtonListener());
		checkingRadioButton.addActionListener( new RadioButtonListener());
		saveAccount.addActionListener( new JButtonListener());
		deposit.addActionListener( new JButtonListener());
		withdrawal.addActionListener( new JButtonListener());
		monthlyProcess.addActionListener( new JButtonListener());
		report.addActionListener( new JButtonListener());
		exit. addActionListener( new JButtonListener());

		panel.add(accType);
		panel.add(savingsRadioButton);
		panel.add(checkingRadioButton);
		panel1.add(accountNumber);
		panel1.add(accNumField);
		panel1.add(initialBalance);
		panel1.add(initBalField);
		panel1.add(annualRate);
		panel1.add(annRateField);
		panel1.add(saveAccount);
		panel1.add(deposit);
		panel1.add(withdrawal);
		panel1.add(monthlyProcess);
		panel1.add(report);
		panel1.add(exit);
		add(panel, BorderLayout.NORTH);
		add(panel1, BorderLayout.CENTER);
		
		
	}
	 
	 
	private class RadioButtonListener  implements ActionListener
	{
		
		public void actionPerformed (ActionEvent e)
		
		{
			String actionCommand = e.getActionCommand();
			if ( actionCommand.equals("Checking"))
			{
				accountType = "Checking";
				annualRate.setVisible(false);
				annRateField.setVisible(false);
			}
			else if (actionCommand.equals("Savings"))
			{
				accountType = "Savings";
				annualRate.setVisible(true);
				annRateField.setVisible(true);
			}
		}
	}
	private class JButtonListener implements ActionListener
	{
		
		public void actionPerformed (ActionEvent e)
		{
			String actionCommand = e.getActionCommand();
			if (actionCommand.equals("Save Account"))
				if (accountType == null)
					JOptionPane.showMessageDialog(null, "Please Choose an Account Type");
				else if (accNumField.getText().equalsIgnoreCase(""))
					JOptionPane.showMessageDialog(null,  "Please Enter an Account Number");
				else if (initBalField.getText().equalsIgnoreCase(""))
					JOptionPane.showMessageDialog(null, "Please Enter an Initial Balance");
				else if (accountType.equalsIgnoreCase("Savings") && annRateField.getText().equalsIgnoreCase(""))
					JOptionPane.showMessageDialog(null, "Please Enter an Annual Rate");
				else
				{		BankAccountManager.array();
						if (BankAccountManager.search(Integer.parseInt(accNumField.getText()) ) == -1)
								{
							if (accountType.equalsIgnoreCase("Checking"))
								annRate = 0;
							else
								annRate = Double.parseDouble(annRateField.getText());
								BankAccountManager.addAccount(accountType, Integer.parseInt(accNumField.getText()), Double.parseDouble(initBalField.getText()), annRate);
								JOptionPane.showMessageDialog(null, "Account " + accNumField.getText() + " Saved.");
								}
						else
							JOptionPane.showMessageDialog(null, "Account number already exists. Please try another.");
				}
			else if (actionCommand.equals("Deposit"))
			{
				BankAccountManager.array();
				scan = new Scanner(JOptionPane.showInputDialog("Input Deposit Amount"));
				depositAmount = scan.nextDouble();
				scan = new Scanner(JOptionPane.showInputDialog("Input Account Number"));
				accountSearch = scan.nextInt();
				BankAccountManager.deposit(depositAmount, accountSearch);
			}
			else if (actionCommand.equals("Withdrawal"))
			{
				BankAccountManager.array();
				scan = new Scanner(JOptionPane.showInputDialog("Input Withdrawal Amount"));
				withdrawAmount = scan.nextDouble();
				scan = new Scanner(JOptionPane.showInputDialog("Input Account Number"));
				accountSearch = scan.nextInt();
				BankAccountManager.withdraw(withdrawAmount, accountSearch);
				
			}
			
			else if (actionCommand.equals("Monthly Process"))
			{
				BankAccountManager.array();
				BankAccountManager.monthlyProcess();
			}
			else if (actionCommand.equals("Generate Report"))
			{
				BankAccountManager.array();
				reportMessage = BankAccountManager.generateReport();
				JOptionPane.showMessageDialog(null, reportMessage);
			}
			else if (actionCommand.equals("Exit"))
			{
				System.exit(0);
			}
		}
	}
}
